<!doctype html><html lang=cn dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>2023-12-21-数据库基础知识 &#183; 菜狗的blog</title>
<meta name=title content="2023-12-21-数据库基础知识 &#183; 菜狗的blog"><meta name=description content="菜狗's website"><meta name=keywords content="架构,postgresql,"><link rel=canonical href=https://hxndg.github.io/posts/2023-12-21-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/><link type=text/css rel=stylesheet href=/css/main.bundle.min.ba3775bebd52a2b4837f8da64e32ee36e5c52bf284a0ce2262562782398b701543947527ad1498487717b1b96fe2a4e48d365a02e0b5d00e224893052e99d83c.css integrity="sha512-ujd1vr1SorSDf42mTjLuNuXFK/KEoM4iYlYngjmLcBVDlHUnrRSYSHcXsblv4qTkjTZaAuC10A4iSJMFLpnYPA=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.764eb2fe8d6a6b086c7c58f87d12c64fa79a7585117fc27eb53f688f80c287a6eff16277f9d186cd223a39ff700e294d64482834faece5e07ee0498fa042d056.js integrity="sha512-dk6y/o1qawhsfFj4fRLGT6eadYURf8J+tT9oj4DCh6bv8WJ3+dGGzSI6Of9wDilNZEgoNPrs5eB+4EmPoELQVg==" data-copy data-copied></script><script src=/lib/zoom/zoom.min.3530c2657381259433194af312ec3d322a97a2ad85661810299757fe793b24c3b8e07ab97fa8e5cf96cff1208f271e75394b6eaa56c2e39e7e2c3ca49fb1921c.js integrity="sha512-NTDCZXOBJZQzGUrzEuw9MiqXoq2FZhgQKZdX/nk7JMO44Hq5f6jlz5bP8SCPJx51OUtuqlbC455+LDykn7GSHA=="></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://hxndg.github.io/posts/2023-12-21-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"><meta property="og:site_name" content="菜狗的blog"><meta property="og:title" content="2023-12-21-数据库基础知识"><meta property="og:description" content="菜狗's website"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-21T00:00:00+00:00"><meta property="article:modified_time" content="2023-08-21T00:00:00+00:00"><meta property="article:tag" content="架构"><meta property="article:tag" content="Postgresql"><meta name=twitter:card content="summary"><meta name=twitter:title content="2023-12-21-数据库基础知识"><meta name=twitter:description content="菜狗's website"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"2023-12-21-数据库基础知识","headline":"2023-12-21-数据库基础知识","inLanguage":"zh-cn","url":"https:\/\/hxndg.github.io\/posts\/2023-12-21-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86\/","author":{"@type":"Person","name":"菜狗"},"copyrightYear":"2023","dateCreated":"2023-08-21T00:00:00\u002b00:00","datePublished":"2023-08-21T00:00:00\u002b00:00","dateModified":"2023-08-21T00:00:00\u002b00:00","keywords":["架构","postgresql"],"mainEntityOfPage":"true","wordCount":"4793"}]</script><meta name=author content="菜狗"><script src=/lib/jquery/jquery.slim.min.03cb160e3cfdb2667a2e2c80d283bebcf63ff8bbc4b629c9ab2babf6fae1d0c07ad470edae783efa4fabda2ac01c58d60e63b98b3c336be8208460f08f4354f5.js integrity="sha512-A8sWDjz9smZ6LiyA0oO+vPY/+LvEtinJqyur9vrh0MB61HDtrng++k+r2irAHFjWDmO5izwza+gghGDwj0NU9Q=="></script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>跳过正文</a></div><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3"><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">菜狗的blog</a></nav><nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12"><a href=/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Home</p></a><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Posts</p></a><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Tags</p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-1 rtl:ml-1"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 md:hidden"><label id=menu-button class=block><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li id=menu-close-button><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Home</p></a></li><li class=mt-1><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Posts</p></a></li><li class=mt-1><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Tags</p></a></li></ul></div></label></div></div><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">2023-12-21-数据库基础知识</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-08-21T00:00:00+00:00>2023 年 8 月 21 日</time><span class="px-2 text-primary-500">&#183;</span><span>4793 字</span><span class="px-2 text-primary-500">&#183;</span><span title=预计阅读>10 分钟</span></div></div><div class="flex author"><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">作者</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">菜狗</div><div class="text-sm text-neutral-700 dark:text-neutral-400">Focus</div><div class="text-2xl sm:text-lg"></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open id=TOCView class="toc-right mt-0 overflow-y-scroll overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">目录</summary><div class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#postgresql基础部分>POSTGRESQL基础部分</a><ul><li><ul><li><a href=#11-sql语法>1.1 SQL语法</a></li><li><a href=#21-psql工具>2.1 psql工具</a></li><li><a href=#31-数据类型>3.1 数据类型</a></li><li><a href=#31-postgresql逻辑结构管理>3.1 postgresql逻辑结构管理</a></li></ul></li></ul></li><li><a href=#结尾>结尾</a></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">目录</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#postgresql基础部分>POSTGRESQL基础部分</a><ul><li><ul><li><a href=#11-sql语法>1.1 SQL语法</a></li><li><a href=#21-psql工具>2.1 psql工具</a></li><li><a href=#31-数据类型>3.1 数据类型</a></li><li><a href=#31-postgresql逻辑结构管理>3.1 postgresql逻辑结构管理</a></li></ul></li></ul></li><li><a href=#结尾>结尾</a></li></ul></nav></div></details><script>var margin=200,marginError=50;(function(){var t=$(window),e=$("#TOCView"),s=e.height();function n(){var n=t.height()-margin;s>=n?(e.css("overflow-y","scroll"),e.css("max-height",n+marginError+"px")):(e.css("overflow-y","hidden"),e.css("max-height","9999999px"))}t.on("resize",n),$(document).ready(n)})()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><h1 class="relative group">数据库基础知识<div id=%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86 aria-label=锚点>#</a></span></h1><h2 class="relative group">POSTGRESQL基础部分<div id=postgresql%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#postgresql%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86 aria-label=锚点>#</a></span></h2><h4 class="relative group">1.1 SQL语法<div id=11-sql%E8%AF%AD%E6%B3%95 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#11-sql%E8%AF%AD%E6%B3%95 aria-label=锚点>#</a></span></h4><p>SQL是一种声明式语言，和命令式编程语言不通，声明式编程语言是描述用户需要做什么，需要得到什么结果，而不是像命名式编程语言给出过程怎么做，过程是什么。类比join，就能反映出来，join实际上是将不同的行拼凑为了新的结果，并最终执行检索操作。</p><p>SQL分为三种分类</p><ul><li>DQL</li><li>DML<ul><li>插入</li><li>更新</li></ul></li><li>DDL<ul><li>建表</li><li>drop表</li></ul></li></ul><h4 class="relative group">2.1 psql工具<div id=21-psql%E5%B7%A5%E5%85%B7 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#21-psql%E5%B7%A5%E5%85%B7 aria-label=锚点>#</a></span></h4><p>psql是postgresql默认的交互工具</p><p>常用的指令（需要先登录进psql，走交互模式）</p><ul><li><code>\l</code>，用于查看有哪些数据库</li><li><code>\c</code>，后面跟数据库名称，用于连接到具体的数据库</li><li><code>\d [pattern]+</code> ，用于描述匹配pattern（表，视图，索引，序列）的信息。如果不追加pattern，会列出数据库当中所有的表。这个命令可以加正则描述符。此外可以用\d+来显示更详细的信息</li><li><code>\h</code>，用于查询具体的命令，比方说\h create user</li></ul><h4 class="relative group">3.1 数据类型<div id=31-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#31-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B aria-label=锚点>#</a></span></h4><ul><li><p>布尔类型，一字节存储空间</p><ul><li>postgresql的bool实际上是三种类型，true、false、null。null表示未知</li></ul></li><li><p>数值类型</p><ul><li>samllint，两字节；</li><li>int，四字节；</li><li>bigint，八字节；相比于int类型，bigint慢很多</li><li>精确类型小数，numeric(别名decimal，用时一般加上一个（），里面指名精度)；一般</li><li>非精确类型浮点小数，real，double precision。如果要求精确地表示计算，应该使用numeric；如果做重要的计算，包括对无穷，下溢做计算，那么应该评估要不要用这种类型；另外两个此类型数字做比较的结果是不一定的</li><li>八字节货币，money</li></ul></li><li><p>字符类型：postgresql的字符串支持多种函数，比方说二进制编解码为base64，使用md5对字符串进行操作</p><ul><li>varcher(n)，变长，存储空间为4+实际的长度。最大的长度为1GB。实际上存储可能是一个指针，指向真正字符串的地址。</li><li>char（n)，定长，如果长度不足那么char会自动地用空格补足长度</li><li>char(n)，text。varchar最长可以1GB</li></ul></li><li><p>二进制类型：</p><ul><li>bytea：二进制串可以用来存储不可见字符，即可以存储图片这种类型；交互需要使用转义字符</li><li>位串：</li></ul></li><li><p>日期类型：</p><ul><li><table><thead><tr><th></th><th>空间</th><th></th><th>最小值</th><th>最大值</th><th>分辨率</th></tr></thead><tbody><tr><td>Timestamp(p)</td><td>8字节</td><td></td><td>4713BC</td><td>5874897AD</td><td>1m s/14位</td></tr><tr><td>Timestamp(p)</td><td>8字节</td><td>日期+时间，带时区</td><td>4713BC</td><td>5874897AD</td><td>1m s/14位</td></tr><tr><td>Interval(p)</td><td>12字节</td><td></td><td>-178000000年</td><td>178000000年</td><td>1m s/14位</td></tr><tr><td>Date</td><td>4字节</td><td>日期</td><td>4713bc</td><td>5874897AD</td><td>1天</td></tr><tr><td>Time(p)</td><td>8字节</td><td>仅一天，不带时区</td><td>00:00:00</td><td>24:00:00</td><td>1m s/14位</td></tr><tr><td>Time(p)</td><td>12字节</td><td>一天，带时区</td><td>00:00:00+1459</td><td>24:00:00-1459</td><td>1m s/14位</td></tr></tbody></table><p>时间类型有一些问题需要注意，输入的格式可能不是默认的，有时候输入的明明以为是月份的位置，最终可能变成日，因此建议指定输入的格式。另外请注意，输入时区的时候不要用简写，比方说CST就是好几种不同的时区，比方说Cuba ST，或者Chain ST啥的。</p><p>另外一点需要注意，对于同一个事务而言，获取时间的函数都会返回一个相同的值</p></li></ul></li><li><p>数组类型</p></li><li><p>枚举类型</p><ul><li>postgresql的枚举类型，需要先创建，使用create type来创建</li><li>postgresql的枚举类型的大小顺序是按照创建时候的顺序确定的</li></ul></li><li><p>xml类型：postgresql支持xml类型，xml类型的数据如果用字符串存储，那么需要用户保证正确性。相反，如果让postgresql启用xml支持，它就可以省事的做校验了</p><ul><li></li></ul></li><li><p>json/jsonb类型</p><ul><li>jsonb以二进制形式存储，因此会被转换为postgresql内部的数据类型，可能损失精度/增加精度。jsonb可以创建索引，而json不能创建索引，这是两者的区别</li><li>postgresql支持对json操作的多种函数，比方说提取key，提取value，返回指定key的value（返回值为text）</li></ul></li></ul><h4 class="relative group">3.1 postgresql逻辑结构管理<div id=31-postgresql%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%E7%AE%A1%E7%90%86 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#31-postgresql%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%E7%AE%A1%E7%90%86 aria-label=锚点>#</a></span></h4><p>postgresql的组织结构可以分为如下三种：</p><ul><li>数据库</li><li>表，索引：postgresql称为Relation，其他数据库称为Table</li><li>数据行：在postgresql称为Tuple，其他称为Rows</li></ul><h5 class="relative group">3.1.1 数据库基本操作<div id=311-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#311-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C aria-label=锚点>#</a></span></h5><p>数据库基本操作：</p><ul><li>创建数据库</li><li>修改数据库：事务块里面可以删除数据库</li><li>删除数据库：注意，事务块里面不能删除数据库</li></ul><h5 class="relative group">3.1.2 模式基本操作<div id=312-%E6%A8%A1%E5%BC%8F%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#312-%E6%A8%A1%E5%BC%8F%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C aria-label=锚点>#</a></span></h5><p>postgresql里面有个模式的概念，模式（schema）是数据库里面的一个概念，理解为命名空间或目录，不同的模式下可以有相同名称的表，函数等对象而不会产生冲突。这里面模式大部分情况需要用户执行授权</p><p>在postgresql里面一个数据库包含一个或者多个模式，模式又包含表，函数。postgresql不允许同事访问不同数据库的对象，模式则没有限制。从这个特性来说，postgresql的模式和mysql的database概念是对应的。oracle数据库里面，一个用户对应一个schema。总之模式存在的主要原因：</p><ul><li>允许多个用户使用同一个数据库而用户不会相互干扰</li><li>把数据库对象放在不同模式组织成逻辑组，方便数据库对象管理</li><li>第三方应用可以放在不同的模式中，这样就不会和其他对象冲突</li></ul><p>如何创建模式呢？</p><pre tabindex=0><code>create schema schemaname [authorization username] schema_element
</code></pre><p>可能的问题点，因为postgresql不能垮数据库访问，因此如果做移植操作，那么<strong>mysql中的三个数据库，在postgresql里面最好是对应三个模式</strong></p><h5 class="relative group">3.1.3 表<div id=313-%E8%A1%A8 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#313-%E8%A1%A8 aria-label=锚点>#</a></span></h5><p>创建表的命令如下，如果希望加一下特定的检查，那么这个检查也可以用类似constraint的方式加在末尾,default用于表示默认值</p><pre tabindex=0><code># 单个列作为主键
create table table_name (col_name col_type primary key...)
# 多个列作为联合主键
create table table_name (col_name_1 col_type_1 [default xxx], col_name_2 col_type_2 [default xxx], col_name_3 col_type_3, col_name_4 col_type_4, col_name_5 col_type_5... CONSTRAINT common_constraint key(col_name_x, col_name_y, ...))
</code></pre><p>可以将其它表作为模板来创建，语法如下</p><pre tabindex=0><code></code></pre><p>这里的继承只会有属性，不会有约束，如果希望有约束可以用下面的指令</p><pre tabindex=0><code></code></pre><p>下面介绍TOAST的概念</p><p>临时表，postgresql支持两种临时表</p><ul><li>会话级的临时表：会话结束的时候，表才会消失，数据会一直保存在会话的生命周期里。因此不同的session的临时表实际上是不一样的</li><li>事务级的临时表：事务结束，就会丢失</li></ul><p>语法如下</p><pre tabindex=0><code>create temporary table
</code></pre><p>unlogged表</p><p>约束</p><ul><li>检查约束</li><li>非空约束</li><li>唯一约束</li><li>主键</li><li>外键约束：用于约束本表中的一个或多个字段的树枝必须出现在另一个表的一个或多个字段里面。也被称为两个相关表之间的参照完整性约束</li></ul><p>修改表，alter table</p><ul><li></li></ul><p>表继承：注意事项有点多，需要多注意</p><p>表继承用于实现分区表，流程如下</p><p>约束排除</p><h5 class="relative group">3.1.4 触发器<div id=314-%E8%A7%A6%E5%8F%91%E5%99%A8 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#314-%E8%A7%A6%E5%8F%91%E5%99%A8 aria-label=锚点>#</a></span></h5><p>触发器可以帮用户实现很多自由自在的功能，比方说记录执行日志</p><p>创建触发器的语法为，一般就是先创建一个执行函数，此函数的返回值为触发器类型；然后创建对应的触发器，用下面的语法</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=p>]</span><span class=w> </span><span class=k>TRIGGER</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=err>{</span><span class=w> </span><span class=k>BEFORE</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>AFTER</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>INSTEAD</span><span class=w> </span><span class=k>OF</span><span class=w> </span><span class=err>}</span><span class=w> </span><span class=err>{</span><span class=w> </span><span class=n>event</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>]</span><span class=w> </span><span class=err>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>ON</span><span class=w> </span><span class=k>table_name</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>[</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>referenced_table_name</span><span class=w> </span><span class=p>]</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=err>{</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>DEFERRABLE</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=k>DEFERRABLE</span><span class=w> </span><span class=p>]</span><span class=w> </span><span class=err>{</span><span class=w> </span><span class=k>INITIALLY</span><span class=w> </span><span class=k>IMMEDIATE</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>INITIALLY</span><span class=w> </span><span class=k>DEFERRED</span><span class=w> </span><span class=err>}</span><span class=w> </span><span class=err>}</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>[</span><span class=w> </span><span class=k>FOR</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=k>EACH</span><span class=w> </span><span class=p>]</span><span class=w> </span><span class=err>{</span><span class=w> </span><span class=k>ROW</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=k>STATEMENT</span><span class=w> </span><span class=err>}</span><span class=w> </span><span class=p>]</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>[</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=n>condition</span><span class=w> </span><span class=p>)</span><span class=w> </span><span class=p>]</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>EXECUTE</span><span class=w> </span><span class=k>PROCEDURE</span><span class=w> </span><span class=n>function_name</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=n>arguments</span><span class=w> </span><span class=p>)</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>event</span><span class=w> </span><span class=n>can</span><span class=w> </span><span class=n>be</span><span class=w> </span><span class=n>one</span><span class=w> </span><span class=k>of</span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>INSERT</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>UPDATE</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=k>OF</span><span class=w> </span><span class=k>column_name</span><span class=w> </span><span class=p>[,</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>]</span><span class=w> </span><span class=p>]</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>DELETE</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>TRUNCATE</span><span class=w>  
</span></span></span></code></pre></div><p>语句级触发器和行级触发器，触发器可以在语法或者行的层次执行，语句级别只执行一次，而行层次会多次执行；语义级别的触发器即使影响的行很多，也只会执行一次。</p><p>Before触发器和After触发器</p><ul><li>before和after可以针对行和语句，其中语句的before最先，语句的after最后</li><li>对于行级触发器，before和instead of如果返回null，就啥也不做。对于insert和update，如果返回非null的行，那么就会执行在新的行里面里面的内容，after的返回值会被忽略</li><li>如果有多个触发器，如果是before/instead of的触发器，每个返回的行（可能已经被修改）会成为下一个触发器的输入</li><li>触发器里面的变量<ul><li>NEW</li><li>OLD</li><li>TG_NAME</li><li>TG_WHEN</li><li>TG_LEVEL</li></ul></li></ul><p>事件触发器</p><ul><li>DDL_COMMAND_START</li><li>DDL_COMMAND_END</li><li>SQL_DROP</li></ul><h5 class="relative group">3.1.5 表空间<div id=315-%E8%A1%A8%E7%A9%BA%E9%97%B4 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#315-%E8%A1%A8%E7%A9%BA%E9%97%B4 aria-label=锚点>#</a></span></h5><p>表空间实际上就是指定表的存储目录，创建数据库的时候就可以指定默认的空间。不过更改表空间的语义是有副作用的，这个需要注意</p><h5 class="relative group">3.1.6 视图和索引<div id=316-%E8%A7%86%E5%9B%BE%E5%92%8C%E7%B4%A2%E5%BC%95 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#316-%E8%A7%86%E5%9B%BE%E5%92%8C%E7%B4%A2%E5%BC%95 aria-label=锚点>#</a></span></h5><p>视图是查询语句定义的虚拟表，可以用来组合多种数据。不过需要知道视图实际上是可读的，可以通过触发器把对视图的操作转换为对表的操作</p><p>索引用来快速查找表记录，常见的索引类型如下</p><ul><li>B-tree：最常用的索引</li><li>Hash：针对等值查询</li><li>GiST：一种特定的架构，可以在架构上实现很多的不同的索引策略</li></ul><h5 class="relative group">3.1.7 用户和权限管理<div id=317-%E7%94%A8%E6%88%B7%E5%92%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#317-%E7%94%A8%E6%88%B7%E5%92%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86 aria-label=锚点>#</a></span></h5><p>权限管理可以说是最简单的控制的方法了，可以方便的控制是否可以操作数据库。</p><p>创建用户和角色的语法如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 创建用户
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=p>[[</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=p>]</span><span class=w> </span><span class=k>option</span><span class=w> </span><span class=p>[...]]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 创建角色
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>ROLE</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=p>[[</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=p>]</span><span class=w> </span><span class=k>option</span><span class=w> </span><span class=p>[...]]</span><span class=w>
</span></span></span></code></pre></div><p>备注：在PG中，用户与角色是没有区别的，角色默认没有login权限，无法登陆，如果授予login之后，也可以像用户一样登陆。</p><p>option常用选项如下：</p><ul><li>SUPERUSER | NOSUPERUSER：创建出来的用户是否为超级用户</li><li>CREATEDB | NOCREATEDB：创建出来的用户是否有create database的权限</li><li>CREATEROLE | NOCREATEROLE：创建出来的用户是否有创建其它角色的权限</li><li>CREATEUSER | NOCREATEUSER：创建出来的用户是否有创建其它用户的权限</li><li>INHERIT | NOINHERIT：确定角色是否继承其它角色的权限</li><li>LOGIN | NOLOGIN：创建出来的角色是否有登录权限</li><li>CONNECTION LIMIT n：创建出来的角色并发连接数限制数量，默认值是“-1”,表示没有限制</li><li>VALID UNTIL &rsquo;timestamp&rsquo;：密码失效时间</li></ul><p>用户的权限分两类，一类是在创建用户时就指定的权限，有：</p><ul><li>超级用户的权限</li><li>创建数据库的权限</li><li>是否允许login的权限</li><li>更多见<code>\help create role</code></li></ul><p>这些权限是创建用户时指定的，后面可以使用alter role来修改。</p><p>另一类是有GRANT和REVOKE命令来管理的，有：</p><ul><li>在数据库中创建schema的权限</li><li>在指定的数据库中创建临时表的权限</li><li>连接某个数据库的权限</li><li>在某个数据库中创建数据库对象的权限，如表、视图、函数等</li><li>在一些表中做SELECT 、INSERT、UPDATE、DELETE等操作的权限</li><li>在一张表的列上做 SELECT 、UPDATE、DELETE等操作的权限</li><li>对序列进行查询(执行序列的currval函数)、使用(执行序列的currval和nextval函数)、更新的权限</li><li>在表上创建触发器的权限</li><li>把表、索引创建到指定表空间的权限</li></ul><p>总之postgresql中的权限是按照以下几个层次进行管理的：</p><p>1.首先管理赋予用户的特殊权限，如超级用户的权限，创建数据库的权限、创建用户的权限、login权限等</p><p>2.然后是在数据库中创建schema的权限</p><p>3.接着是在schema中创建数据库对象(如表、索引)的权限</p><p>4.之后是对表进行操作(insert、update、delete、select)的权限</p><p>5.最后是操作(update、delete、select)表中某些字段的权限</p><h5 class="relative group">3.1.8 事务和锁<div id=318-%E4%BA%8B%E5%8A%A1%E5%92%8C%E9%94%81 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#318-%E4%BA%8B%E5%8A%A1%E5%92%8C%E9%94%81 aria-label=锚点>#</a></span></h5><h5 class="relative group">3.1.9 执行计划<div id=319-%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#319-%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92 aria-label=锚点>#</a></span></h5><p>什么是执行计划？数据库的执行计划通俗点说就是，<strong>数据库服务器在执行sql语句的时候，会准备几套方案，最后选择消耗资源最小的那个方案</strong>。在postgresql可以估算出来具体执行的代价</p><p>语法如下，其中analyze会让语句真正地执行一次</p><pre tabindex=0><code>EXPLAIN [ ( option [, ...] ) ] statement
EXPLAIN [ ANALYZE ] [ VERBOSE ] statement

这里 option可以是：

    ANALYZE [ boolean ]
    VERBOSE [ boolean ]
    COSTS [ boolean ]
    BUFFERS [ boolean ]
    TIMING [ boolean ]
    FORMAT { TEXT | XML | JSON | YAML }
</code></pre><p>可以通过执行计划看到postgresql内部的部分优化</p><h5 class="relative group">3.1.10 postgresql技术内幕<div id=3110-postgresql%E6%8A%80%E6%9C%AF%E5%86%85%E5%B9%95 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#3110-postgresql%E6%8A%80%E6%9C%AF%E5%86%85%E5%B9%95 aria-label=锚点>#</a></span></h5><p>先解释几个名词</p><ul><li>xmin</li><li>xmax</li><li>cmin</li><li>cmax</li></ul><p>这些有什么用呢？</p><ul><li>新插入一行：新插入行的xmin为当前事务ID，xmax为0</li><li>修改一行，实际上是插入新的一行，元数据行的xmin不变，xmax改为当前事务ID，新的数据行上面的xmin改为当前的事务ID，xmax为0</li><li>删除一行的时候，把被删除的行上面的xmax填写为当前事务ID</li></ul><p>因此，xmin实际上是插入数据行的事务ID，xmax用来标记删除数据行的事务ID（这里面还藏了一个事务ID递增这么一点），postgresql的mvcc就是这么实现的</p><p>相比较mysql和oracle数据库的旧版本数据存储在原先的数据块里面，postgresql的好处是</p><ul><li>事务回滚可以立即完成</li><li>数据可以进行多更新，不必像oracle和innodb那样需要保证回滚段不会被用完</li></ul><p>缺点是</p><ul><li>旧版本数据需要清理</li><li>旧版本的数据会导致查询慢</li></ul><h5 class="relative group">3.1.11 物理存储结构<div id=3111-%E7%89%A9%E7%90%86%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#3111-%E7%89%A9%E7%90%86%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84 aria-label=锚点>#</a></span></h5><h2 class="relative group">结尾<div id=%E7%BB%93%E5%B0%BE class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#%E7%BB%93%E5%B0%BE aria-label=锚点>#</a></span></h2><p>唉，尴尬</p><p><figure><img class="my-0 rounded-md" loading=lazy src=https://i.loli.net/2020/08/27/BFHNyfpx3EsIDUG.jpg alt=狗头的赞赏码.jpg></figure></p></div></div><script>var oid="views_posts\\2023-12-21-数据库基础知识\\index.md",oid_likes="likes_posts\\2023-12-21-数据库基础知识\\index.md"</script><script type=text/javascript src=/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q+oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/posts/2023-06-11-%E7%A8%8B%E5%BA%8F%E5%91%98%E4%BF%AE%E5%85%BB/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">2023-06-11-程序员修养</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2023-06-11T00:00:00+00:00>2023 年 6 月 11 日</time>
</span></span></a></span><span><a class="flex text-right group ml-3" href=/posts/2023-08-21-%E5%AE%89%E5%85%A8%E5%B7%A5%E7%A8%8B%E5%B8%88%E4%BF%AE%E5%85%BB/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">2023-08-21-工程师修养</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2023-08-21T00:00:00+00:00>2023 年 8 月 21 日</time>
</span></span><span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label=返回顶部 title=返回顶部>&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">© 2025 - 2025 菜狗 All Rights Reserved.</p><p class="text-xs text-neutral-500 dark:text-neutral-400">由 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a> 强力驱动</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://hxndg.github.io/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=搜索 tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="关闭 (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>